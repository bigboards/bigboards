---
- hosts: host
  sudo: yes
  tasks:
    - name: make sure the avahi-daemon init file is correct
      template:
        src: "templates/etc/init/avahi-daemon.conf"
        dest: "/etc/init/avahi-daemon.conf"

    - name: make sure the avahi configuration file is up to date
      template:
        src: "templates/etc/avahi/avahi-daemon.conf"
        dest: "/etc/avahi/avahi-daemon.conf"

    - name: make sure avahi is started and will start on boot
      service:
        name: "avahi-daemon"
        state: "running"
        enabled: "yes"