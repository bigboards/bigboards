{
  "node_name": "{{ ansible_hostname }}",
  "interface": "{{ ansible_local.bb.node.nic_int }}",
{% if not 'host-coordinators' in group_names %}
  "retry_join": [
{% for item in groups['host']|reject('sameas', ansible_hostname) %}
    "{{hostvars[item]['ansible_' + ansible_local.bb.node.nic_int]['ipv4']['address']}}"{% if not loop.last %},{% endif %}
{% endfor %}
  ],
{% endif %}
  "tags": {
        "hex-id": "{{ ansible_local.bb.hex.id }}",
        "hex-name": "{{ ansible_local.bb.hex.name }}",
        "role": "{{ ansible_local.bb.node.role }}",
        "arch": "{{ ansible_machine }}",
        "network.internal": "{{ ansible_local.bb.node.nic_int }}",
        "network.external": "{{ ansible_local.bb.node.nic_ext }}"
  }
}