{
  "node_name": "{{ ansible_hostname }}",
  "interface": "{{ ansible_local.bb.node.nic0 }}",
{% if not 'host_coordinators' in group_names %}
  "retry_join": [
{% for item in groups['host']|reject('sameas', ansible_hostname) %}
    "{{hostvars[item]['ansible_' + ansible_local.bb.node.nic0]['ipv4']['address']}}"{% if not loop.last %},{% endif %}
{% endfor %}
  ],
{% endif %}
  "tags": {
        "hex-id": "{{ ansible_local.bb.hex.id }}",
        "hex-name": "{{ ansible_local.bb.hex.name }}",
        "role": "{{ ansible_local.bb.node.role }}",
        "arch": "{{ ansible_machine }}",
        "network.internal": "{{ ansible_local.bb.node.nic0 }}",
        "network.external": "{{ ansible_local.bb.node.nic0 }}:0",
        "cpu": "{{ ansible_processor }}",
        "cpu.cores": "{{ ansible_processor_cores }}",
        "cpu.count": "{{ ansible_processor_count }}",
        "cpu.cores.threads": "{{ ansible_processor_threads_per_core }}",
        "cpu.vcpus": "{{ ansible_processor_vcpus }}",
        "memory": "{{ ansible_memory_mb }}",
        "mounts": "{{ ansible_mounts }}",
        "devices": "{{ ansible_devices }}",
  }
}